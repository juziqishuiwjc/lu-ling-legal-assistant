<!--pages/user-center/user-center.wxml-->
<view class="container">
  <!-- 用户信息卡片 -->
  <view class="user-card">
    <view class="avatar-wrapper" bindtap="changeAvatar">
      <image class="avatar" src="{{avatar || 'https://i.ibb.co/kYn16mr/user-avatar.png'}}" mode="aspectFill"></image>
      <view class="avatar-edit-hint">
        <text class="edit-icon">📷</text>
      </view>
    </view>
    <view class="user-info">
      <text class="username" bindtap="setPhone">{{phone ? '****' + phone : '点击设置手机号'}}</text>
      <view class="status-badge {{isPaid ? 'paid' : 'free'}}">
        <text class="status-text">{{isPaid ? '专业版会员' : '免费用户'}}</text>
      </view>
    </view>
  </view>

  <!-- 快捷操作卡片 -->
  <view class="quick-actions-card">
    <view class="quick-action-item" bindtap="setPhone">
      <view class="action-icon">📱</view>
      <view class="action-content">
        <text class="action-title">设置手机号</text>
        <text class="action-desc">{{phone ? '已设置：****' + phone : '点击设置'}}</text>
      </view>
      <text class="action-arrow">›</text>
    </view>
  </view>

  <!-- 会员信息卡片 -->
  <view class="member-card" wx:if="{{isPaid}}">
    <text class="card-title">💎 会员信息</text>
    <view class="member-info-item">
      <text class="member-label">会员类型：</text>
      <text class="member-value">{{planType === 'monthly' ? '月付会员' : planType === 'yearly' ? '年付会员' : '试用会员'}}</text>
    </view>
    <view class="member-info-item">
      <text class="member-label">开通时间：</text>
      <text class="member-value">{{paidDate}}</text>
    </view>
    <view class="member-info-item">
      <text class="member-label">到期日期：</text>
      <text class="member-value">{{expireDate}}</text>
    </view>
    <view class="member-info-item">
      <text class="member-label">剩余时间：</text>
      <text class="member-value remaining-days">{{remainingDays}}</text>
    </view>
  </view>

  <!-- 使用统计 -->
  <view class="stats-card">
    <text class="card-title">📊 使用统计</text>
    <view class="stat-item">
      <text class="stat-label">{{isPaid ? '今日剩余次数' : '今日已使用'}}</text>
      <text class="stat-value">{{isPaid ? '无限次' : dailyCount + '/5 次'}}</text>
    </view>
    <view class="stat-item">
      <text class="stat-label">注册时间</text>
      <text class="stat-value">{{registerDate || '未注册'}}</text>
    </view>
    <view class="stat-item" wx:if="{{isPaid}}">
      <text class="stat-label">会员开通时间</text>
      <text class="stat-value">{{paidDate}}</text>
    </view>
  </view>

  <!-- 会员权益说明 -->
  <view class="benefits-card" wx:if="{{!isPaid}}">
    <text class="card-title">🎁 升级会员</text>
    <view class="benefit-item">
      <text class="benefit-icon">✓</text>
      <text class="benefit-text">无限次法律咨询</text>
    </view>
    <view class="benefit-item">
      <text class="benefit-icon">✓</text>
      <text class="benefit-text">高级法律分析</text>
    </view>
    <view class="benefit-item">
      <text class="benefit-icon">✓</text>
      <text class="benefit-text">优先响应</text>
    </view>
    <button class="upgrade-button" bindtap="goToUpgrade">
      立即升级
    </button>
  </view>

  <!-- 联系律师 -->
  <view class="contact-card">
    <text class="card-title">📞 联系律师</text>
    <view class="contact-row">
      <text class="contact-label">微信号：</text>
      <text class="contact-value" bindtap="copyWechat">lawyer_wang_zz</text>
      <text class="copy-hint">（点击复制）</text>
    </view>
  </view>

  <!-- 隐藏的管理员入口 - 长按版本号触发 -->
  <view class="footer-info" bindlongpress="goToAdmin">
    <text class="version-text">庐陵吉成法答 v1.0.0</text>
  </view>
</view>
